{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Simple Task Manager","text":"<p>A centralized YAML-configured task scheduler for macOS and Linux periodic tasks. Each task runs in its own isolated environment with a standardized <code>run.sh</code> interface.</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>\ud83c\udfaf Simple Configuration: Single YAML file for all tasks</li> <li>\ud83d\udd0c Decoupled Architecture: Scheduler only knows about <code>run.sh</code> + args</li> <li>\ud83d\udd12 Isolated Environments: Each task has its own venv/dependencies</li> <li>\ud83c\udf10 Cross-Platform: Works on macOS (launchd) and Linux (systemd)</li> <li>\ud83d\udde3\ufe0f Polyglot: Write tasks in Python, Go, Bash, or any language</li> <li>\u23f1\ufe0f Cron Scheduling: Standard cron expressions for flexible scheduling</li> <li>\ud83d\udcdd Centralized Logging: All task executions logged in one place</li> </ul> <p>Personal Project</p> <p>This is a personal project, primarily built for my own use. It is provided as-is, without any warranty or guarantee. Use at your own risk.</p>"},{"location":"#architecture-overview","title":"Architecture Overview","text":"<pre><code>simple-task-manager/\n\u251c\u2500\u2500 config.yaml              # Central configuration for all tasks\n\u251c\u2500\u2500 Makefile                 # Installation and service management\n\u251c\u2500\u2500 scheduler/               # Scheduling daemon (APScheduler)\n\u2502   \u251c\u2500\u2500 scheduler.py\n\u2502   \u251c\u2500\u2500 config/              # Service templates\n\u2502   \u2502   \u251c\u2500\u2500 scheduler.plist.template      (macOS)\n\u2502   \u2502   \u2514\u2500\u2500 scheduler.service.template    (Linux)\n\u2502   \u2514\u2500\u2500 .venv/\n\u2514\u2500\u2500 tasks/                   # Your periodic tasks\n    \u2514\u2500\u2500 calendar-sync/       # Example task\n        \u251c\u2500\u2500 run.sh          # Standard entry point\n        \u251c\u2500\u2500 Makefile\n        \u2514\u2500\u2500 .venv/\n</code></pre>"},{"location":"#quick-start","title":"Quick Start","text":"<p>Get started in 3 steps:</p> <pre><code># 1. Install scheduler and all tasks\nmake install\n\n# 2. Install system service\nmake install-service\n\n# 3. Start the scheduler\nmake service-start\n</code></pre> <p>See the Quick Start Guide for detailed instructions.</p>"},{"location":"#design-principles","title":"Design Principles","text":"<ul> <li>Decoupled: Scheduler executes <code>run.sh</code>, doesn't know about Python/Go/etc</li> <li>Isolated: Each task manages its own environment and dependencies</li> <li>Simple: YAML config instead of multiple plist/systemd files</li> <li>Portable: Same code works on macOS and Linux</li> <li>Transparent: All logs in one place with clear execution tracking</li> </ul>"},{"location":"#use-cases","title":"Use Cases","text":"<ul> <li>Synchronize calendars between services</li> <li>Backup files periodically</li> <li>Run health checks and monitoring</li> <li>Data pipeline orchestration</li> <li>Automated reports generation</li> <li>Any recurring task you need to run on a schedule</li> </ul>"},{"location":"#requirements","title":"Requirements","text":"<ul> <li>macOS: 10.14+ (for launchd service)</li> <li>Linux: systemd-based distribution</li> <li>Python: 3.7+ (for scheduler daemon)</li> <li>Task-specific: Each task may have additional requirements</li> </ul>"},{"location":"#next-steps","title":"Next Steps","text":"<ul> <li>Installation Guide - Platform-specific installation</li> <li>Configuration Reference - Complete config.yaml guide</li> <li>Adding Tasks - Create your own tasks</li> <li>Available Tasks - Browse existing tasks</li> <li>Troubleshooting - Common issues and solutions</li> </ul>"},{"location":"architecture/","title":"Architecture","text":"<p>Understanding how Simple Task Manager works.</p>"},{"location":"architecture/#system-overview","title":"System Overview","text":"<p>Simple Task Manager consists of three main components:</p> <ol> <li>Scheduler Daemon - Python process using APScheduler</li> <li>Tasks - Independent scripts with <code>run.sh</code> interface</li> <li>Configuration - Single YAML file defining tasks and schedules</li> </ol> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  OS Service Manager (launchd/systemd)           \u2502\n\u2502  Keeps scheduler daemon running                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                 \u2502\n                 \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Scheduler Daemon (scheduler.py)                \u2502\n\u2502  - Reads config.yaml                            \u2502\n\u2502  - Registers cron jobs with APScheduler         \u2502\n\u2502  - Executes tasks via run.sh                    \u2502\n\u2502  - Captures output and logs execution           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                 \u2502\n        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n        \u25bc                 \u25bc\n   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n   \u2502 Task 1  \u2502       \u2502 Task 2  \u2502\n   \u2502 run.sh  \u2502       \u2502 run.sh  \u2502\n   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"architecture/#components","title":"Components","text":""},{"location":"architecture/#1-scheduler-daemon","title":"1. Scheduler Daemon","text":"<p>Location: <code>scheduler/scheduler.py</code></p> <p>Responsibilities: - Load and validate <code>config.yaml</code> - Register cron jobs with APScheduler - Execute tasks at scheduled times - Capture stdout/stderr - Log execution results - Handle timeouts - Restart failed tasks (handled by OS service manager)</p> <p>Lifecycle:</p> <ol> <li>Startup:</li> <li>Read <code>config.yaml</code></li> <li>Validate each enabled task</li> <li>Register cron jobs</li> <li> <p>Start APScheduler</p> </li> <li> <p>Execution:</p> </li> <li>APScheduler triggers job</li> <li>Change to task directory</li> <li>Execute <code>./run.sh [args...]</code> with timeout</li> <li>Capture output</li> <li> <p>Log results</p> </li> <li> <p>Shutdown:</p> </li> <li>Graceful shutdown on SIGTERM</li> <li>Wait for running tasks to complete (or timeout)</li> </ol>"},{"location":"architecture/#2-tasks","title":"2. Tasks","text":"<p>Location: <code>tasks/*/</code></p> <p>Structure: <pre><code>tasks/task-name/\n\u251c\u2500\u2500 run.sh              # Entry point (required)\n\u251c\u2500\u2500 Makefile            # Build commands (required)\n\u251c\u2500\u2500 requirements.txt    # Dependencies (Python)\n\u251c\u2500\u2500 go.mod              # Dependencies (Go)\n\u251c\u2500\u2500 .venv/              # Virtual environment\n\u2514\u2500\u2500 [implementation]    # Task code\n</code></pre></p> <p>Lifecycle:</p> <ol> <li>Installation: <code>make install</code></li> <li>Create virtual environment</li> <li>Install dependencies</li> <li> <p>Build binaries if needed</p> </li> <li> <p>Execution: Scheduler runs <code>./run.sh</code></p> </li> <li>Activate environment</li> <li>Run task with arguments</li> <li> <p>Return exit code</p> </li> <li> <p>Cleanup: <code>make clean</code></p> </li> <li>Remove cache files</li> <li>Clean build artifacts</li> </ol>"},{"location":"architecture/#3-configuration","title":"3. Configuration","text":"<p>Location: <code>config.yaml</code> (repository root)</p> <p>Schema: <pre><code>scheduler:\n  log_file: &lt;path&gt;\n  default_timeout: &lt;seconds&gt;\n\ntasks:\n  - name: &lt;string&gt;\n    path: &lt;string&gt;\n    cron: &lt;string&gt;\n    args: [&lt;strings&gt;]\n    timeout: &lt;int&gt;\n    enabled: &lt;bool&gt;\n</code></pre></p> <p>Loading: Read once at scheduler startup</p> <p>Validation: Performed before registering tasks</p>"},{"location":"architecture/#design-principles","title":"Design Principles","text":""},{"location":"architecture/#decoupling","title":"Decoupling","text":"<p>Scheduler knows: - Task name - Task path - Arguments to pass - When to run</p> <p>Scheduler doesn't know: - Implementation language - Dependencies - Internal logic</p> <p>Benefits: - Tasks can be written in any language - Task changes don't affect scheduler - Easy to add new tasks</p>"},{"location":"architecture/#isolation","title":"Isolation","text":"<p>Each task has: - Own directory - Own dependencies (venv, go.mod, etc.) - Own build process</p> <p>Benefits: - No dependency conflicts - Independent upgrades - Parallel development</p>"},{"location":"architecture/#simplicity","title":"Simplicity","text":"<p>Single interface: Every task exposes <code>run.sh</code></p> <p>Single config: All scheduling in one YAML file</p> <p>Single log: All executions in one place</p> <p>Benefits: - Easy to understand - Easy to debug - Easy to maintain</p>"},{"location":"architecture/#data-flow","title":"Data Flow","text":""},{"location":"architecture/#task-execution-flow","title":"Task Execution Flow","text":"<pre><code>1. APScheduler triggers job at cron time\n   \u2193\n2. Scheduler logs: \"Executing 'task-name' with args [...]\"\n   \u2193\n3. Change directory: cd tasks/task-name\n   \u2193\n4. Execute: timeout &lt;seconds&gt; ./run.sh &lt;args...&gt;\n   \u2193\n5. Capture stdout/stderr in real-time\n   \u2193\n6. Task completes (or times out)\n   \u2193\n7. Log exit code and duration\n   \u2193\n8. Write captured output to log with [task-name] prefix\n</code></pre>"},{"location":"architecture/#example-log-output","title":"Example Log Output","text":"<pre><code>[2025-12-15 10:00:00] INFO: Executing 'calendar-sync' with args ['--days', '30']\n[2025-12-15 10:00:15] INFO: Task 'calendar-sync' completed in 15.2s (exit code: 0)\n[2025-12-15 10:00:15] [calendar-sync] STDOUT: Fetching events...\n[2025-12-15 10:00:15] [calendar-sync] STDOUT: Sync complete: Created: 3\n</code></pre>"},{"location":"architecture/#service-integration","title":"Service Integration","text":""},{"location":"architecture/#macos-launchd","title":"macOS (launchd)","text":"<p>Service File: <code>~/Library/LaunchAgents/com.patarra.scheduler.plist</code></p> <p>Responsibilities: - Start scheduler at login (<code>RunAtLoad</code>) - Keep scheduler running (<code>KeepAlive</code>) - Restart on crash - Redirect logs to files</p> <p>Process Supervision: <pre><code>launchd\n  \u2514\u2500&gt; scheduler.py (kept alive)\n        \u251c\u2500&gt; task1 (spawned as needed)\n        \u2514\u2500&gt; task2 (spawned as needed)\n</code></pre></p>"},{"location":"architecture/#linux-systemd","title":"Linux (systemd)","text":"<p>Service File: <code>~/.config/systemd/user/scheduler.service</code></p> <p>Responsibilities: - Start scheduler as user service - Restart on failure (<code>Restart=on-failure</code>) - Redirect logs to files - Optionally run without login (lingering)</p> <p>Process Supervision: <pre><code>systemd (user)\n  \u2514\u2500&gt; scheduler.py (Type=simple)\n        \u251c\u2500&gt; task1 (spawned as needed)\n        \u2514\u2500&gt; task2 (spawned as needed)\n</code></pre></p>"},{"location":"architecture/#error-handling","title":"Error Handling","text":""},{"location":"architecture/#task-failures","title":"Task Failures","text":"<p>Exit code != 0: - Logged as ERROR - Scheduler continues running - Next scheduled execution proceeds normally</p> <p>Timeout: - Process killed with SIGTERM - Logged as ERROR with timeout duration - Next execution proceeds</p> <p>Exception in scheduler: - Logged with traceback - Scheduler continues for other tasks - Failed task skipped for this run</p>"},{"location":"architecture/#scheduler-crashes","title":"Scheduler Crashes","text":"<p>macOS (launchd): - Automatically restarted by launchd - <code>KeepAlive: true</code> ensures restart</p> <p>Linux (systemd): - Automatically restarted by systemd - <code>Restart=on-failure</code> with <code>RestartSec=10</code></p>"},{"location":"architecture/#configuration-errors","title":"Configuration Errors","text":"<p>On startup: - Invalid YAML: Scheduler exits with error - Missing required fields: Task skipped, warning logged - Invalid cron: Task skipped, error logged - Missing run.sh: Task skipped, error logged</p>"},{"location":"architecture/#concurrency","title":"Concurrency","text":""},{"location":"architecture/#task-execution","title":"Task Execution","text":"<p>Tasks execute in parallel: - Each task runs in its own process - Multiple tasks can run simultaneously - No shared state between tasks</p>"},{"location":"architecture/#scheduler-threading","title":"Scheduler Threading","text":"<p>APScheduler uses: - Thread pool for job execution - Single thread per job - No lock contention between tasks</p>"},{"location":"architecture/#security-considerations","title":"Security Considerations","text":""},{"location":"architecture/#file-permissions","title":"File Permissions","text":"<p>Service files: - <code>chmod 644</code> for plist/service files - Owned by user</p> <p>Task scripts: - <code>chmod 755</code> for run.sh (executable) - Owned by user</p>"},{"location":"architecture/#secrets-management","title":"Secrets Management","text":"<p>Don't commit secrets: - Add to <code>.gitignore</code> - Use environment variables - Use OS keychain/keyring</p> <p>Example: <pre><code># In run.sh\nexport API_KEY=$(security find-generic-password -a $USER -s my-task -w)\npython main.py \"$@\"\n</code></pre></p>"},{"location":"architecture/#isolation_1","title":"Isolation","text":"<p>Tasks run as your user: - Same permissions as your shell - Can access files you can access - No privilege escalation</p>"},{"location":"architecture/#extensibility","title":"Extensibility","text":""},{"location":"architecture/#adding-new-features","title":"Adding New Features","text":"<p>Scheduler enhancements: - Edit <code>scheduler/scheduler.py</code> - Update <code>config.yaml</code> schema - Document in configuration reference</p> <p>Task features: - Implement in task itself - No scheduler changes needed - Just add args to config</p>"},{"location":"architecture/#plugin-system-future","title":"Plugin System (Future)","text":"<p>Potential extensions: - Pre-execution hooks - Post-execution hooks - Notification integrations - Metrics collection</p>"},{"location":"architecture/#performance","title":"Performance","text":""},{"location":"architecture/#scheduler-overhead","title":"Scheduler Overhead","text":"<p>Minimal: - ~20MB RAM for scheduler daemon - ~1-5% CPU during task execution - ~0% CPU when idle</p> <p>Task overhead: - Depends on task implementation - Python venv activation: ~100ms - Process spawn: ~50ms</p>"},{"location":"architecture/#scalability","title":"Scalability","text":"<p>Current: - Designed for personal use (5-20 tasks) - All tasks on same machine</p> <p>Limitations: - Single scheduler process - No distributed execution - No task dependencies</p> <p>If you need more: - Consider Apache Airflow - Consider Prefect - Consider Temporal</p>"},{"location":"architecture/#design-decisions","title":"Design Decisions","text":""},{"location":"architecture/#why-apscheduler","title":"Why APScheduler?","text":"<p>Pros: - Python-native - Cron support - Simple API - No external dependencies</p> <p>Alternatives considered: - <code>schedule</code> library: Less feature-rich - Celery: Too complex for this use case - Pure cron: Permission issues on modern macOS</p>"},{"location":"architecture/#why-runsh-interface","title":"Why <code>run.sh</code> Interface?","text":"<p>Pros: - Language-agnostic - Simple contract - Easy to test manually - Standard Unix pattern</p> <p>Alternatives considered: - Python imports: Couples to Python - JSON-RPC: Too complex - REST API: Unnecessary overhead</p>"},{"location":"architecture/#why-single-config-file","title":"Why Single Config File?","text":"<p>Pros: - One place to understand all tasks - Easy to backup/version - Simple to edit</p> <p>Alternatives considered: - Per-task configs: Harder to see big picture - Database: Overkill for personal use - Environment variables: Hard to manage</p>"},{"location":"architecture/#next-steps","title":"Next Steps","text":"<ul> <li>Configuration Reference - Detailed config</li> <li>Adding Tasks - Create tasks</li> <li>Troubleshooting - Debug issues</li> </ul>"},{"location":"configuration/","title":"Configuration Reference","text":"<p>Complete reference for <code>config.yaml</code> configuration file.</p>"},{"location":"configuration/#configuration-file-location","title":"Configuration File Location","text":"<p>The configuration file must be named <code>config.yaml</code> and located in the repository root:</p> <pre><code>simple-task-manager/\n\u251c\u2500\u2500 config.yaml          \u2190 Here\n\u251c\u2500\u2500 Makefile\n\u251c\u2500\u2500 scheduler/\n\u2514\u2500\u2500 tasks/\n</code></pre>"},{"location":"configuration/#file-structure","title":"File Structure","text":"<pre><code># Global scheduler settings\nscheduler:\n  log_file: &lt;path&gt;\n  default_timeout: &lt;seconds&gt;\n\n# Task definitions\ntasks:\n  - name: &lt;task-name&gt;\n    path: &lt;task-path&gt;\n    cron: \"&lt;cron-expression&gt;\"\n    args: [&lt;arg1&gt;, &lt;arg2&gt;, ...]\n    timeout: &lt;seconds&gt;\n    enabled: &lt;true|false&gt;\n</code></pre>"},{"location":"configuration/#scheduler-section","title":"Scheduler Section","text":"<p>Global settings for the scheduler daemon.</p>"},{"location":"configuration/#log_file","title":"<code>log_file</code>","text":"<p>Type: String Required: No Default: - macOS: <code>~/Library/Logs/scheduler.log</code> - Linux: <code>~/.local/share/scheduler/logs/scheduler.log</code></p> <p>Path to the scheduler log file. Supports tilde (<code>~</code>) expansion.</p> <pre><code>scheduler:\n  log_file: ~/my-custom-location/scheduler.log\n</code></pre>"},{"location":"configuration/#default_timeout","title":"<code>default_timeout</code>","text":"<p>Type: Integer Required: No Default: <code>300</code> (5 minutes)</p> <p>Default maximum execution time in seconds for tasks that don't specify their own timeout.</p> <pre><code>scheduler:\n  default_timeout: 600  # 10 minutes\n</code></pre>"},{"location":"configuration/#tasks-section","title":"Tasks Section","text":"<p>Array of task definitions.</p>"},{"location":"configuration/#name","title":"<code>name</code>","text":"<p>Type: String Required: Yes Unique: Yes</p> <p>Unique identifier for the task. Used in logs and must be unique across all tasks.</p> <pre><code>- name: calendar-sync\n</code></pre> <p>Valid names: - <code>my-task</code> - <code>backup-photos</code> - <code>data-pipeline</code></p> <p>Invalid names: - Names with spaces - Duplicate names</p>"},{"location":"configuration/#path","title":"<code>path</code>","text":"<p>Type: String Required: Yes</p> <p>Relative path from the repository root to the task directory. Must contain a <code>run.sh</code> file.</p> <pre><code>- path: tasks/calendar-sync\n</code></pre> <p>The scheduler will: 1. Change to this directory 2. Execute <code>./run.sh</code> with the specified arguments</p>"},{"location":"configuration/#cron","title":"<code>cron</code>","text":"<p>Type: String Required: Yes</p> <p>Standard 5-field cron expression defining when the task runs.</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 minute (0-59)\n\u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 hour (0-23)\n\u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 day of month (1-31)\n\u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 month (1-12)\n\u2502 \u2502 \u2502 \u2502 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 day of week (0-6) (Sunday=0)\n\u2502 \u2502 \u2502 \u2502 \u2502\n* * * * *\n</code></pre> <p>Examples:</p> <pre><code>cron: \"*/30 * * * *\"     # Every 30 minutes\ncron: \"0 * * * *\"        # Every hour at minute 0\ncron: \"0 9 * * *\"        # Every day at 9:00 AM\ncron: \"0 9 * * 1\"        # Every Monday at 9:00 AM\ncron: \"0 9-17 * * 1-5\"   # Every hour 9-5, Mon-Fri\ncron: \"0 0 1 * *\"        # First day of every month\ncron: \"0 0 * * 0\"        # Every Sunday at midnight\n</code></pre> <p>Special characters: - <code>*</code> - Any value - <code>,</code> - List (e.g., <code>1,15</code> = 1st and 15th) - <code>-</code> - Range (e.g., <code>9-17</code> = 9 through 17) - <code>/</code> - Step (e.g., <code>*/15</code> = every 15 minutes)</p> <p>Testing cron expressions: - crontab.guru - Cron expression explainer - crontab-generator.org - Visual cron builder</p>"},{"location":"configuration/#args","title":"<code>args</code>","text":"<p>Type: Array of strings Required: No Default: <code>[]</code></p> <p>Arguments passed to <code>run.sh</code>. Can be flags, options, or values.</p> <pre><code>args:\n  - \"--source-calendar\"\n  - \"work@example.com\"\n  - \"--days\"\n  - \"30\"\n  - \"--exclude-declined-events\"\n</code></pre> <p>Executed as:</p> <pre><code>./run.sh --source-calendar work@example.com --days 30 --exclude-declined-events\n</code></pre> <p>Empty args:</p> <pre><code>args: []\n</code></pre>"},{"location":"configuration/#timeout","title":"<code>timeout</code>","text":"<p>Type: Integer Required: No Default: Uses <code>scheduler.default_timeout</code></p> <p>Maximum execution time in seconds. Task is killed if it exceeds this limit.</p> <pre><code>timeout: 600  # 10 minutes\n</code></pre> <p>Choosing timeout values: - Short tasks (&lt; 1 min): 60-300 seconds - Medium tasks (1-5 min): 300-600 seconds - Long tasks (5-30 min): 600-1800 seconds</p> <p>Set timeouts higher than expected execution time to allow for variations.</p>"},{"location":"configuration/#enabled","title":"<code>enabled</code>","text":"<p>Type: Boolean Required: No Default: <code>true</code></p> <p>Whether the task should be registered with the scheduler.</p> <pre><code>enabled: true   # Task will run\nenabled: false  # Task will be skipped\n</code></pre> <p>Use <code>enabled: false</code> to temporarily disable tasks without deleting configuration.</p>"},{"location":"configuration/#complete-example","title":"Complete Example","text":"<pre><code># Scheduler configuration\nscheduler:\n  log_file: ~/Library/Logs/scheduler.log\n  default_timeout: 300\n\n# Task definitions\ntasks:\n  # Calendar synchronization - runs every 30 minutes\n  - name: calendar-sync\n    path: tasks/calendar-sync\n    cron: \"*/30 * * * *\"\n    args:\n      - \"--source-calendar\"\n      - \"work@company.com\"\n      - \"--days\"\n      - \"30\"\n      - \"--exclude-declined-events\"\n      - \"--do-sync\"\n      - \"Personal\"\n    timeout: 600\n    enabled: true\n\n  # Daily backup - runs at 2 AM\n  - name: backup-photos\n    path: tasks/backup-photos\n    cron: \"0 2 * * *\"\n    args:\n      - \"--source\"\n      - \"~/Pictures\"\n      - \"--destination\"\n      - \"/mnt/backup\"\n    timeout: 3600\n    enabled: true\n\n  # Weekly report - runs Monday at 9 AM\n  - name: weekly-report\n    path: tasks/weekly-report\n    cron: \"0 9 * * 1\"\n    args: []\n    timeout: 300\n    enabled: true\n\n  # Disabled task - kept for reference\n  - name: old-task\n    path: tasks/old-task\n    cron: \"0 0 * * *\"\n    args: []\n    enabled: false\n</code></pre>"},{"location":"configuration/#configuration-validation","title":"Configuration Validation","text":"<p>The scheduler validates configuration on startup:</p> <ul> <li>Syntax errors: Invalid YAML format</li> <li>Missing required fields: <code>name</code>, <code>path</code>, <code>cron</code></li> <li>Invalid cron expressions: Syntax errors in cron</li> <li>Missing <code>run.sh</code>: Task path doesn't contain <code>run.sh</code></li> <li>Non-executable <code>run.sh</code>: Script lacks execute permission</li> <li>Duplicate names: Multiple tasks with same name</li> </ul> <p>Validation errors are logged and the scheduler will not start.</p>"},{"location":"configuration/#applying-configuration-changes","title":"Applying Configuration Changes","text":"<p>After editing <code>config.yaml</code>:</p> <pre><code># Restart the scheduler to apply changes\nmake service-restart\n</code></pre> <p>The scheduler loads configuration on startup. No hot-reload is currently supported.</p>"},{"location":"configuration/#configuration-tips","title":"Configuration Tips","text":""},{"location":"configuration/#use-comments","title":"Use Comments","text":"<p>Document why tasks exist and what they do:</p> <pre><code>tasks:\n  # Syncs work calendar to personal calendar\n  # Filters out declined events and all-day events\n  # Runs every 30 minutes during work hours\n  - name: calendar-sync\n    # ...\n</code></pre>"},{"location":"configuration/#group-related-tasks","title":"Group Related Tasks","text":"<p>Organize tasks by function or schedule:</p> <pre><code>tasks:\n  # === Hourly Tasks ===\n  - name: health-check\n    cron: \"0 * * * *\"\n    # ...\n\n  # === Daily Tasks ===\n  - name: daily-backup\n    cron: \"0 2 * * *\"\n    # ...\n\n  # === Weekly Tasks ===\n  - name: weekly-report\n    cron: \"0 9 * * 1\"\n    # ...\n</code></pre>"},{"location":"configuration/#keep-args-readable","title":"Keep Args Readable","text":"<p>Use one argument per line for readability:</p> <pre><code># Good\nargs:\n  - \"--source\"\n  - \"~/data\"\n  - \"--format\"\n  - \"json\"\n\n# Less readable\nargs: [\"--source\", \"~/data\", \"--format\", \"json\"]\n</code></pre>"},{"location":"configuration/#test-cron-expressions","title":"Test Cron Expressions","text":"<p>Before deploying, verify cron expressions:</p> <pre><code># Next 5 execution times\npython -c \"from apscheduler.triggers.cron import CronTrigger; \\\nimport datetime; \\\nt = CronTrigger.from_crontab('*/30 * * * *'); \\\nfor i in range(5): print(t.get_next_fire_time(None, datetime.datetime.now()))\"\n</code></pre>"},{"location":"configuration/#next-steps","title":"Next Steps","text":"<ul> <li>Adding Tasks - Create custom tasks</li> <li>Available Tasks - Browse existing tasks</li> <li>Troubleshooting - Configuration issues</li> </ul>"},{"location":"quick-start/","title":"Quick Start","text":"<p>Get Simple Task Manager running in under 5 minutes.</p>"},{"location":"quick-start/#prerequisites","title":"Prerequisites","text":"<ul> <li>macOS 10.14+ or Linux with systemd</li> <li>Python 3.7 or higher</li> <li>Git</li> </ul>"},{"location":"quick-start/#installation","title":"Installation","text":""},{"location":"quick-start/#1-clone-the-repository","title":"1. Clone the Repository","text":"<pre><code>git clone https://github.com/patarra/simple-task-manager.git\ncd simple-task-manager\n</code></pre>"},{"location":"quick-start/#2-install-dependencies","title":"2. Install Dependencies","text":"<p>This installs the scheduler daemon and all tasks:</p> <pre><code>make install\n</code></pre> <p>You'll see output like:</p> <pre><code>Installing task scheduler...\nInstalling scheduler daemon...\n\u2713 Scheduler dependencies installed\nInstalling tasks...\n\u2713 Calendar Sync dependencies installed\n\u2713 Installation complete\n</code></pre>"},{"location":"quick-start/#3-configure-tasks","title":"3. Configure Tasks","text":"<p>Edit <code>config.yaml</code> to configure your tasks:</p> <pre><code>scheduler:\n  log_file: ~/Library/Logs/scheduler.log  # macOS\n  # log_file: ~/.local/share/scheduler/logs/scheduler.log  # Linux\n  default_timeout: 300\n\ntasks:\n  - name: calendar-sync\n    path: tasks/calendar-sync\n    cron: \"*/30 * * * *\"  # Every 30 minutes\n    args:\n      - \"--source-calendar\"\n      - \"your-email@example.com\"\n      - \"--days\"\n      - \"30\"\n      - \"--do-sync\"\n      - \"Personal\"\n    timeout: 600\n    enabled: true\n</code></pre>"},{"location":"quick-start/#4-install-system-service","title":"4. Install System Service","text":"<p>Generate the appropriate service file for your OS:</p> <pre><code>make install-service\n</code></pre> <p>macOS: Creates <code>~/Library/LaunchAgents/com.patarra.scheduler.plist</code> Linux: Creates <code>~/.config/systemd/user/scheduler.service</code></p>"},{"location":"quick-start/#5-start-the-scheduler","title":"5. Start the Scheduler","text":"<pre><code>make service-start\n</code></pre>"},{"location":"quick-start/#6-verify-its-running","title":"6. Verify It's Running","text":"<p>Check the scheduler status:</p> <pre><code>make service-status\n</code></pre> <p>View logs:</p> <pre><code>make service-logs\n</code></pre> <p>You should see output like:</p> <pre><code>[2025-12-15 10:00:00] INFO: Scheduler started, loaded 1 tasks\n[2025-12-15 10:00:00] INFO: Registered task 'calendar-sync' with cron '*/30 * * * *'\n</code></pre>"},{"location":"quick-start/#test-locally-optional","title":"Test Locally (Optional)","text":"<p>Before installing as a service, you can test the scheduler locally:</p> <pre><code>make test-scheduler\n</code></pre> <p>Press <code>Ctrl+C</code> to stop.</p>"},{"location":"quick-start/#next-steps","title":"Next Steps","text":"<ul> <li>Configure more tasks: See Configuration Reference</li> <li>Add your own task: Follow the Adding Tasks Guide</li> <li>Browse available tasks: Check out Available Tasks</li> <li>Having issues?: Visit Troubleshooting</li> </ul>"},{"location":"quick-start/#common-commands","title":"Common Commands","text":"<pre><code># Service management\nmake service-start       # Start the scheduler\nmake service-stop        # Stop the scheduler\nmake service-restart     # Restart the scheduler\nmake service-status      # Check if running\nmake service-logs        # View execution logs\n\n# Maintenance\nmake clean               # Clean cache files\nmake clean-venv          # Remove virtual environments\n\n# Help\nmake help                # Show all available commands\n</code></pre>"},{"location":"quick-start/#platform-specific-guides","title":"Platform-Specific Guides","text":"<ul> <li>macOS Installation - Detailed macOS setup</li> <li>Linux Installation - Detailed Linux setup</li> </ul>"},{"location":"troubleshooting/","title":"Troubleshooting","text":"<p>Common issues and solutions for Simple Task Manager.</p>"},{"location":"troubleshooting/#installation-issues","title":"Installation Issues","text":""},{"location":"troubleshooting/#python-version-too-old","title":"Python Version Too Old","text":"<p>Symptom: <code>ERROR: Python 3.7+ required</code></p> <p>Solution:</p> <pre><code># Check Python version\npython3 --version\n\n# Install newer Python (macOS)\nbrew install python@3.11\n\n# Install newer Python (Ubuntu/Debian)\nsudo apt install python3.11\n</code></pre>"},{"location":"troubleshooting/#make-not-found","title":"Make Not Found","text":"<p>Symptom: <code>bash: make: command not found</code></p> <p>Solution:</p> <p>macOS: <pre><code>xcode-select --install\n</code></pre></p> <p>Linux: <pre><code># Ubuntu/Debian\nsudo apt install build-essential\n\n# Fedora\nsudo dnf groupinstall \"Development Tools\"\n</code></pre></p>"},{"location":"troubleshooting/#permission-denied-creating-venv","title":"Permission Denied Creating Venv","text":"<p>Symptom: <code>Permission denied: '.venv'</code></p> <p>Solution:</p> <pre><code># Check directory permissions\nls -la\n\n# Ensure you own the directory\nsudo chown -R $USER:$USER .\n</code></pre>"},{"location":"troubleshooting/#service-issues","title":"Service Issues","text":""},{"location":"troubleshooting/#service-wont-start-macos","title":"Service Won't Start (macOS)","text":"<p>Check for errors:</p> <pre><code># View launchd logs\nlog show --predicate 'process == \"launchd\"' --last 5m | grep scheduler\n\n# Check plist syntax\nplutil -lint ~/Library/LaunchAgents/com.patarra.scheduler.plist\n\n# Try loading manually\nlaunchctl load ~/Library/LaunchAgents/com.patarra.scheduler.plist\n</code></pre> <p>Common fixes:</p> <pre><code># Unload and reload\nlaunchctl unload ~/Library/LaunchAgents/com.patarra.scheduler.plist\nlaunchctl load ~/Library/LaunchAgents/com.patarra.scheduler.plist\n</code></pre>"},{"location":"troubleshooting/#service-wont-start-linux","title":"Service Won't Start (Linux)","text":"<p>Check for errors:</p> <pre><code># View systemd status\nsystemctl --user status scheduler\n\n# View detailed logs\njournalctl --user -u scheduler -xe\n</code></pre> <p>Common fixes:</p> <pre><code># Reload systemd configuration\nsystemctl --user daemon-reload\n\n# Check service file syntax\nsystemd-analyze --user verify scheduler.service\n</code></pre>"},{"location":"troubleshooting/#service-stops-after-logout-linux","title":"Service Stops After Logout (Linux)","text":"<p>Symptom: Scheduler stops when you log out</p> <p>Solution: Enable lingering</p> <pre><code>loginctl enable-linger $USER\n</code></pre> <p>Verify:</p> <pre><code>loginctl show-user $USER | grep Linger\n# Should show: Linger=yes\n</code></pre>"},{"location":"troubleshooting/#service-not-loaded","title":"Service Not Loaded","text":"<p>Symptom: <code>make service-status</code> shows \"Service not installed\"</p> <p>Solution:</p> <pre><code>make install-service\nmake service-start\n</code></pre>"},{"location":"troubleshooting/#task-execution-issues","title":"Task Execution Issues","text":""},{"location":"troubleshooting/#task-fails-with-virtual-environment-not-found","title":"Task Fails with \"Virtual Environment Not Found\"","text":"<p>Symptom: <pre><code>Error: Virtual environment not found. Run 'make install' first.\n</code></pre></p> <p>Solution:</p> <pre><code># From repository root\nmake install\n\n# Or install specific task\ncd tasks/task-name\nmake install\n</code></pre>"},{"location":"troubleshooting/#task-fails-with-permission-denied","title":"Task Fails with \"Permission Denied\"","text":"<p>Symptom: <pre><code>bash: ./run.sh: Permission denied\n</code></pre></p> <p>Solution:</p> <pre><code>chmod +x tasks/*/run.sh\n</code></pre>"},{"location":"troubleshooting/#task-times-out","title":"Task Times Out","text":"<p>Symptom: <pre><code>ERROR: Task 'my-task' exceeded timeout of 300s\n</code></pre></p> <p>Solution:</p> <p>Increase timeout in <code>config.yaml</code>:</p> <pre><code>- name: my-task\n  timeout: 600  # Increase to 10 minutes\n</code></pre>"},{"location":"troubleshooting/#task-fails-silently","title":"Task Fails Silently","text":"<p>Symptom: No output in logs</p> <p>Check:</p> <ol> <li> <p>Task is enabled:    <pre><code>enabled: true\n</code></pre></p> </li> <li> <p>Cron expression is valid:    <pre><code># Test with online tool: https://crontab.guru/\n</code></pre></p> </li> <li> <p><code>run.sh</code> has correct shebang:    <pre><code>#!/bin/bash\n</code></pre></p> </li> <li> <p>Test manually:    <pre><code>cd tasks/task-name\n./run.sh [args...]\n</code></pre></p> </li> </ol>"},{"location":"troubleshooting/#macos-only-task-on-linux","title":"macOS-Only Task on Linux","text":"<p>Symptom: <pre><code>\u26a0\ufe0f  SKIPPING: calendar-sync (macOS only)\n</code></pre></p> <p>Explanation: This is expected. Some tasks require OS-specific frameworks.</p> <p>Solution: Disable in <code>config.yaml</code> on Linux systems:</p> <pre><code>- name: calendar-sync\n  enabled: false  # Disable on Linux\n</code></pre>"},{"location":"troubleshooting/#configuration-issues","title":"Configuration Issues","text":""},{"location":"troubleshooting/#invalid-yaml-syntax","title":"Invalid YAML Syntax","text":"<p>Symptom: <pre><code>ERROR: Failed to parse config.yaml\n</code></pre></p> <p>Solution:</p> <p>Validate YAML syntax:</p> <pre><code># Install yamllint\npip install yamllint\n\n# Check syntax\nyamllint config.yaml\n</code></pre> <p>Common issues: - Inconsistent indentation (mix of tabs and spaces) - Missing colons - Unquoted strings with special characters</p>"},{"location":"troubleshooting/#config-changes-not-applied","title":"Config Changes Not Applied","text":"<p>Symptom: Old configuration still running</p> <p>Solution:</p> <pre><code>make service-restart\n</code></pre> <p>The scheduler loads config on startup, not during runtime.</p>"},{"location":"troubleshooting/#cron-not-triggering","title":"Cron Not Triggering","text":"<p>Verify cron expression:</p> <pre><code>from apscheduler.triggers.cron import CronTrigger\nfrom datetime import datetime\n\ntrigger = CronTrigger.from_crontab(\"*/30 * * * *\")\nprint(\"Next run:\", trigger.get_next_fire_time(None, datetime.now()))\n</code></pre> <p>Common mistakes: - <code>0 */2 * * *</code> (correct: every 2 hours) - <code>*/2 0 * * *</code> (wrong: only at midnight)</p>"},{"location":"troubleshooting/#logging-issues","title":"Logging Issues","text":""},{"location":"troubleshooting/#no-logs-appearing","title":"No Logs Appearing","text":"<p>Check log file location:</p> <pre><code># macOS\nls -la ~/Library/Logs/scheduler.log\n\n# Linux\nls -la ~/.local/share/scheduler/logs/scheduler.log\n</code></pre> <p>Verify in config.yaml:</p> <pre><code>scheduler:\n  log_file: ~/Library/Logs/scheduler.log\n</code></pre> <p>Check permissions:</p> <pre><code># Ensure log directory exists and is writable\nmkdir -p ~/Library/Logs\nchmod 755 ~/Library/Logs\n</code></pre>"},{"location":"troubleshooting/#logs-filling-disk","title":"Logs Filling Disk","text":"<p>Rotate logs (Linux with systemd):</p> <p>Create <code>~/.config/systemd/user/scheduler.service.d/override.conf</code>:</p> <pre><code>[Service]\nStandardOutput=append:/var/log/scheduler/scheduler.log\nStandardError=append:/var/log/scheduler/error.log\n</code></pre> <p>Use logrotate:</p> <pre><code>sudo nano /etc/logrotate.d/scheduler\n</code></pre> <pre><code>/var/log/scheduler/*.log {\n    daily\n    rotate 7\n    compress\n    missingok\n    notifempty\n}\n</code></pre> <p>Manual cleanup:</p> <pre><code># Keep last 1000 lines\ntail -1000 ~/Library/Logs/scheduler.log &gt; /tmp/scheduler.log\nmv /tmp/scheduler.log ~/Library/Logs/scheduler.log\n</code></pre>"},{"location":"troubleshooting/#permission-issues","title":"Permission Issues","text":""},{"location":"troubleshooting/#calendar-access-denied-macos","title":"Calendar Access Denied (macOS)","text":"<p>Symptom: <pre><code>Error: Calendar access denied\n</code></pre></p> <p>Solution:</p> <ol> <li>Open System Preferences</li> <li>Security &amp; Privacy \u2192 Privacy</li> <li>Select Calendars</li> <li>Check Terminal or Python</li> </ol> <p>Or reset permissions:</p> <pre><code>tccutil reset Calendar\n</code></pre> <p>Next run will prompt again.</p>"},{"location":"troubleshooting/#full-disk-access-needed","title":"Full Disk Access Needed","text":"<p>Some tasks may need Full Disk Access:</p> <ol> <li>System Preferences \u2192 Security &amp; Privacy</li> <li>Privacy \u2192 Full Disk Access</li> <li>Add Terminal or Python</li> </ol>"},{"location":"troubleshooting/#performance-issues","title":"Performance Issues","text":""},{"location":"troubleshooting/#scheduler-using-high-cpu","title":"Scheduler Using High CPU","text":"<p>Check running tasks:</p> <pre><code># macOS\nps aux | grep scheduler\n\n# Linux\nsystemctl --user status scheduler\n</code></pre> <p>Solutions: - Reduce task frequency in cron expressions - Optimize task implementation - Add timeout limits</p>"},{"location":"troubleshooting/#task-running-too-long","title":"Task Running Too Long","text":"<p>Add timeout:</p> <pre><code>- name: slow-task\n  timeout: 300  # Kill after 5 minutes\n</code></pre> <p>Optimize task: - Add early exit conditions - Use incremental processing - Cache results</p>"},{"location":"troubleshooting/#debugging","title":"Debugging","text":""},{"location":"troubleshooting/#enable-debug-logging","title":"Enable Debug Logging","text":"<p>Edit <code>scheduler/scheduler.py</code> logging level:</p> <pre><code>logging.basicConfig(\n    level=logging.DEBUG,  # Change from INFO\n    # ...\n)\n</code></pre> <p>Restart scheduler:</p> <pre><code>make service-restart\n</code></pre>"},{"location":"troubleshooting/#test-task-manually","title":"Test Task Manually","text":"<pre><code>cd tasks/task-name\n./run.sh --arg1 value1\necho \"Exit code: $?\"\n</code></pre>"},{"location":"troubleshooting/#run-scheduler-locally","title":"Run Scheduler Locally","text":"<pre><code>make service-stop\nmake test-scheduler\n</code></pre> <p>Press <code>Ctrl+C</code> to stop.</p>"},{"location":"troubleshooting/#check-task-dependencies","title":"Check Task Dependencies","text":"<pre><code>cd tasks/task-name\nmake install\nmake test  # If available\n</code></pre>"},{"location":"troubleshooting/#error-messages","title":"Error Messages","text":""},{"location":"troubleshooting/#config-file-not-found","title":"\"Config file not found\"","text":"<p>Cause: <code>config.yaml</code> missing from repository root</p> <p>Solution:</p> <pre><code># Copy example config\ncp config.yaml.example config.yaml\nnano config.yaml\n</code></pre>"},{"location":"troubleshooting/#task-directory-does-not-exist","title":"\"Task directory does not exist\"","text":"<p>Cause: Path in config.yaml is incorrect</p> <p>Solution:</p> <p>Check path is relative to repository root:</p> <pre><code># Correct\npath: tasks/my-task\n\n# Wrong\npath: /absolute/path/to/tasks/my-task\npath: my-task  # Missing tasks/ prefix\n</code></pre>"},{"location":"troubleshooting/#runsh-not-found","title":"\"run.sh not found\"","text":"<p>Cause: Missing <code>run.sh</code> in task directory</p> <p>Solution:</p> <pre><code>cd tasks/task-name\nnano run.sh\nchmod +x run.sh\n</code></pre>"},{"location":"troubleshooting/#runsh-is-not-executable","title":"\"run.sh is not executable\"","text":"<p>Cause: Script lacks execute permission</p> <p>Solution:</p> <pre><code>chmod +x tasks/*/run.sh\n</code></pre>"},{"location":"troubleshooting/#invalid-cron-expression","title":"\"Invalid cron expression\"","text":"<p>Cause: Malformed cron expression</p> <p>Solution:</p> <p>Use standard 5-field format: <code>* * * * *</code></p> <p>Test at crontab.guru</p> <p>Common mistakes: - 6 fields (includes seconds) - not supported - 4 fields - missing day of week - Invalid ranges like <code>25-30</code> for hours</p>"},{"location":"troubleshooting/#getting-help","title":"Getting Help","text":""},{"location":"troubleshooting/#check-logs-first","title":"Check Logs First","text":"<pre><code>make service-logs\n</code></pre>"},{"location":"troubleshooting/#test-locally","title":"Test Locally","text":"<pre><code>make test-scheduler\n</code></pre>"},{"location":"troubleshooting/#check-service-status","title":"Check Service Status","text":"<pre><code>make service-status\n</code></pre>"},{"location":"troubleshooting/#manual-task-test","title":"Manual Task Test","text":"<pre><code>cd tasks/task-name\n./run.sh [args...]\n</code></pre>"},{"location":"troubleshooting/#report-issues","title":"Report Issues","text":"<p>If you found a bug:</p> <ol> <li>Check existing issues</li> <li>Create new issue with:</li> <li>OS and version</li> <li>Python version</li> <li>Error logs</li> <li>Steps to reproduce</li> </ol>"},{"location":"troubleshooting/#next-steps","title":"Next Steps","text":"<ul> <li>Configuration Reference - Config options</li> <li>Adding Tasks - Create tasks</li> <li>Architecture - System design</li> </ul>"},{"location":"guides/adding-tasks/","title":"Adding Tasks","text":"<p>Learn how to create custom tasks for Simple Task Manager.</p>"},{"location":"guides/adding-tasks/#overview","title":"Overview","text":"<p>A task is a self-contained directory with: - <code>run.sh</code> - Executable entry point - <code>Makefile</code> - Build and installation commands - Task implementation (Python, Go, Bash, etc.) - Dependencies specification</p>"},{"location":"guides/adding-tasks/#quick-start","title":"Quick Start","text":""},{"location":"guides/adding-tasks/#1-create-task-directory","title":"1. Create Task Directory","text":"<pre><code>mkdir -p tasks/my-task\ncd tasks/my-task\n</code></pre>"},{"location":"guides/adding-tasks/#2-create-runsh","title":"2. Create <code>run.sh</code>","text":"<pre><code>#!/bin/bash\nset -e\n\nSCRIPT_DIR=\"$(cd \"$(dirname \"${BASH_SOURCE[0]}\")\" &amp;&amp; pwd)\"\n\n# Activate environment if needed\nif [ -f \"$SCRIPT_DIR/.venv/bin/activate\" ]; then\n    source \"$SCRIPT_DIR/.venv/bin/activate\"\nfi\n\n# Run your task\npython \"$SCRIPT_DIR/main.py\" \"$@\"\n</code></pre> <p>Make it executable:</p> <pre><code>chmod +x run.sh\n</code></pre>"},{"location":"guides/adding-tasks/#3-create-task-implementation","title":"3. Create Task Implementation","text":"<p><code>main.py</code>:</p> <pre><code>#!/usr/bin/env python3\nimport sys\nimport argparse\n\ndef main():\n    parser = argparse.ArgumentParser(description='My task')\n    parser.add_argument('--option', help='An option')\n    args = parser.parse_args()\n\n    print(f\"Running my-task with option: {args.option}\")\n    # Your task logic here\n\n    return 0\n\nif __name__ == '__main__':\n    sys.exit(main())\n</code></pre>"},{"location":"guides/adding-tasks/#4-create-makefile","title":"4. Create <code>Makefile</code>","text":"<pre><code>.PHONY: install clean help\n\nVENV := .venv\nPYTHON := $(VENV)/bin/python\nPIP := $(VENV)/bin/pip\n\ninstall:\n    python3 -m venv $(VENV)\n    $(PIP) install --upgrade pip\n    $(PIP) install -r requirements.txt\n\nclean:\n    find . -type d -name \"__pycache__\" -exec rm -rf {} + 2&gt;/dev/null || true\n\nhelp:\n    @echo \"My Task - Available targets:\"\n    @echo \"  make install  - Install dependencies\"\n    @echo \"  make clean    - Clean cache files\"\n</code></pre>"},{"location":"guides/adding-tasks/#5-create-requirementstxt","title":"5. Create <code>requirements.txt</code>","text":"<pre><code># Add your dependencies\nrequests&gt;=2.28.0\n</code></pre>"},{"location":"guides/adding-tasks/#6-add-to-config","title":"6. Add to Config","text":"<p>Edit root <code>config.yaml</code>:</p> <pre><code>tasks:\n  - name: my-task\n    path: tasks/my-task\n    cron: \"0 * * * *\"\n    args:\n      - \"--option\"\n      - \"value\"\n    enabled: true\n</code></pre>"},{"location":"guides/adding-tasks/#7-update-root-makefile","title":"7. Update Root Makefile","text":"<p>Edit root <code>Makefile</code>, add your task to <code>TASKS</code>:</p> <pre><code>TASKS := calendar-sync my-task\n</code></pre>"},{"location":"guides/adding-tasks/#8-install-and-test","title":"8. Install and Test","text":"<pre><code># From repository root\nmake install\nmake test-scheduler\n</code></pre>"},{"location":"guides/adding-tasks/#task-templates","title":"Task Templates","text":""},{"location":"guides/adding-tasks/#python-task","title":"Python Task","text":"<p>Directory structure: <pre><code>tasks/python-task/\n\u251c\u2500\u2500 run.sh\n\u251c\u2500\u2500 Makefile\n\u251c\u2500\u2500 requirements.txt\n\u251c\u2500\u2500 main.py\n\u2514\u2500\u2500 .venv/\n</code></pre></p> <p>run.sh: <pre><code>#!/bin/bash\nset -e\nSCRIPT_DIR=\"$(cd \"$(dirname \"${BASH_SOURCE[0]}\")\" &amp;&amp; pwd)\"\nif [ -f \"$SCRIPT_DIR/.venv/bin/activate\" ]; then\n    source \"$SCRIPT_DIR/.venv/bin/activate\"\nfi\npython \"$SCRIPT_DIR/main.py\" \"$@\"\n</code></pre></p> <p>Makefile: <pre><code>.PHONY: install clean test\n\nVENV := .venv\nPYTHON := $(VENV)/bin/python\nPIP := $(VENV)/bin/pip\n\ninstall:\n    python3 -m venv $(VENV)\n    $(PIP) install --upgrade pip\n    $(PIP) install -r requirements.txt\n\ntest:\n    $(PYTHON) -m pytest\n\nclean:\n    find . -type d -name \"__pycache__\" -exec rm -rf {} + 2&gt;/dev/null || true\n    find . -type f -name \"*.pyc\" -delete 2&gt;/dev/null || true\n</code></pre></p>"},{"location":"guides/adding-tasks/#go-task","title":"Go Task","text":"<p>Directory structure: <pre><code>tasks/go-task/\n\u251c\u2500\u2500 run.sh\n\u251c\u2500\u2500 Makefile\n\u251c\u2500\u2500 go.mod\n\u251c\u2500\u2500 go.sum\n\u2514\u2500\u2500 main.go\n</code></pre></p> <p>run.sh: <pre><code>#!/bin/bash\nset -e\nSCRIPT_DIR=\"$(cd \"$(dirname \"${BASH_SOURCE[0]}\")\" &amp;&amp; pwd)\"\ncd \"$SCRIPT_DIR\"\ngo run . \"$@\"\n</code></pre></p> <p>Makefile: <pre><code>.PHONY: install clean build test\n\ninstall:\n    go mod download\n\nbuild:\n    go build -o task\n\ntest:\n    go test ./...\n\nclean:\n    rm -f task\n    go clean\n</code></pre></p>"},{"location":"guides/adding-tasks/#bash-task","title":"Bash Task","text":"<p>Directory structure: <pre><code>tasks/bash-task/\n\u251c\u2500\u2500 run.sh\n\u251c\u2500\u2500 Makefile\n\u2514\u2500\u2500 lib.sh (optional)\n</code></pre></p> <p>run.sh: <pre><code>#!/bin/bash\nset -e\n\n# Source helpers if needed\nSCRIPT_DIR=\"$(cd \"$(dirname \"${BASH_SOURCE[0]}\")\" &amp;&amp; pwd)\"\nsource \"$SCRIPT_DIR/lib.sh\"\n\n# Your task logic\nmain() {\n    echo \"Running bash task with args: $@\"\n    # Task implementation\n}\n\nmain \"$@\"\n</code></pre></p> <p>Makefile: <pre><code>.PHONY: install clean test\n\ninstall:\n    @echo \"No dependencies to install\"\n\ntest:\n    shellcheck run.sh\n\nclean:\n    @echo \"Nothing to clean\"\n</code></pre></p>"},{"location":"guides/adding-tasks/#os-specific-tasks","title":"OS-Specific Tasks","text":"<p>Tasks that only work on specific operating systems should detect and handle this gracefully.</p>"},{"location":"guides/adding-tasks/#macos-only-task","title":"macOS-Only Task","text":"<pre><code># Detect OS\nUNAME_S := $(shell uname -s)\n\ninstall:\n    @if [ \"$(UNAME_S)\" != \"Darwin\" ]; then \\\n        echo \"\u26a0\ufe0f  SKIPPING: This task requires macOS\"; \\\n        echo \"   Current OS: $(UNAME_S)\"; \\\n        exit 0; \\\n    fi\n    # Normal installation\n    python3 -m venv .venv\n    .venv/bin/pip install -r requirements.txt\n</code></pre>"},{"location":"guides/adding-tasks/#linux-only-task","title":"Linux-Only Task","text":"<pre><code>UNAME_S := $(shell uname -s)\n\ninstall:\n    @if [ \"$(UNAME_S)\" = \"Darwin\" ]; then \\\n        echo \"\u26a0\ufe0f  SKIPPING: This task requires Linux\"; \\\n        exit 0; \\\n    fi\n    # Normal installation\n</code></pre>"},{"location":"guides/adding-tasks/#task-contract","title":"Task Contract","text":""},{"location":"guides/adding-tasks/#input","title":"Input","text":"<p>Arguments: - Passed from <code>config.yaml</code> args list - Accessible via <code>$@</code> in bash, <code>sys.argv</code> in Python</p> <p>Working Directory: - Scheduler runs <code>run.sh</code> from the task directory - Use relative paths within task</p> <p>Environment: - Inherits scheduler's environment - <code>PATH</code> includes task's venv/bin if activated</p>"},{"location":"guides/adding-tasks/#output","title":"Output","text":"<p>Exit Code: - <code>0</code> = Success - Non-zero = Failure (logged as error)</p> <p>stdout: - Logged with <code>[task-name] STDOUT:</code> prefix - Use for normal output</p> <p>stderr: - Logged with <code>[task-name] STDERR:</code> prefix - Use for errors and warnings</p> <p>Example:</p> <pre><code>import sys\n\nprint(\"Processing item 1\")  # Goes to stdout\nprint(\"Warning: slow network\", file=sys.stderr)  # Goes to stderr\n\nsys.exit(0)  # Success\n</code></pre>"},{"location":"guides/adding-tasks/#timeout","title":"Timeout","text":"<p>If task exceeds <code>timeout</code>, scheduler kills the process.</p> <p>Handling: <pre><code>import signal\nimport sys\n\ndef signal_handler(sig, frame):\n    print(\"Task timed out, cleaning up...\")\n    # Cleanup logic\n    sys.exit(1)\n\nsignal.signal(signal.SIGTERM, signal_handler)\n</code></pre></p>"},{"location":"guides/adding-tasks/#best-practices","title":"Best Practices","text":""},{"location":"guides/adding-tasks/#1-make-runsh-robust","title":"1. Make <code>run.sh</code> Robust","text":"<pre><code>#!/bin/bash\nset -e  # Exit on error\nset -u  # Error on undefined variable\nset -o pipefail  # Pipeline failures\n\nSCRIPT_DIR=\"$(cd \"$(dirname \"${BASH_SOURCE[0]}\")\" &amp;&amp; pwd)\"\n\n# Validate environment\nif [ ! -f \"$SCRIPT_DIR/.venv/bin/activate\" ]; then\n    echo \"Error: Virtual environment not found\" &gt;&amp;2\n    exit 1\nfi\n\nsource \"$SCRIPT_DIR/.venv/bin/activate\"\npython \"$SCRIPT_DIR/main.py\" \"$@\"\n</code></pre>"},{"location":"guides/adding-tasks/#2-handle-arguments-properly","title":"2. Handle Arguments Properly","text":"<pre><code>import argparse\n\ndef main():\n    parser = argparse.ArgumentParser()\n    parser.add_argument('--required', required=True)\n    parser.add_argument('--optional', default='default')\n\n    args = parser.parse_args()\n    # Use args.required, args.optional\n</code></pre>"},{"location":"guides/adding-tasks/#3-provide-helpful-errors","title":"3. Provide Helpful Errors","text":"<pre><code>try:\n    result = do_work()\nexcept FileNotFoundError as e:\n    print(f\"Error: Required file not found: {e}\", file=sys.stderr)\n    sys.exit(1)\nexcept Exception as e:\n    print(f\"Unexpected error: {e}\", file=sys.stderr)\n    sys.exit(1)\n</code></pre>"},{"location":"guides/adding-tasks/#4-log-progress","title":"4. Log Progress","text":"<pre><code>print(\"Starting data sync...\")\nprint(f\"Processed {count} items\")\nprint(\"Sync complete\")\n</code></pre>"},{"location":"guides/adding-tasks/#5-make-tasks-idempotent","title":"5. Make Tasks Idempotent","text":"<p>Tasks should be safe to run multiple times:</p> <pre><code># Check if work is needed\nif not needs_update():\n    print(\"Already up to date\")\n    return 0\n\n# Do the work\nupdate()\n</code></pre>"},{"location":"guides/adding-tasks/#6-add-readme","title":"6. Add README","text":"<p>Create <code>tasks/my-task/README.md</code>:</p> <pre><code># My Task\n\nBrief description of what this task does.\n\n## Requirements\n\n- Python 3.7+\n- API key in `~/.myservice/config`\n\n## Configuration\n\n```yaml\n- name: my-task\n  cron: \"0 * * * *\"\n  args:\n    - \"--api-key\"\n    - \"your-key\"\n</code></pre>"},{"location":"guides/adding-tasks/#testing","title":"Testing","text":"<p><pre><code>cd tasks/my-task\n./run.sh --api-key test\n</code></pre> <pre><code>## Testing Tasks\n\n### Manual Testing\n\n```bash\ncd tasks/my-task\n./run.sh --option value\n</code></pre></p>"},{"location":"guides/adding-tasks/#with-make","title":"With Make","text":"<pre><code>cd tasks/my-task\nmake install\nmake test\n</code></pre>"},{"location":"guides/adding-tasks/#in-scheduler-dry-run","title":"In Scheduler (dry run)","text":"<p>Edit <code>config.yaml</code> with a test schedule:</p> <pre><code>- name: my-task\n  path: tasks/my-task\n  cron: \"*/5 * * * *\"  # Every 5 minutes for testing\n  args: [\"--test-mode\"]\n  enabled: true\n</code></pre> <p>Run locally:</p> <pre><code>make test-scheduler\n</code></pre> <p>Watch logs:</p> <pre><code>tail -f ~/Library/Logs/scheduler.log\n</code></pre>"},{"location":"guides/adding-tasks/#debugging","title":"Debugging","text":""},{"location":"guides/adding-tasks/#enable-verbose-output","title":"Enable Verbose Output","text":"<pre><code>import logging\n\nlogging.basicConfig(\n    level=logging.DEBUG,\n    format='%(asctime)s - %(levelname)s - %(message)s'\n)\n\nlogging.debug(\"Detailed debug info\")\nlogging.info(\"Normal info\")\nlogging.error(\"Error occurred\")\n</code></pre>"},{"location":"guides/adding-tasks/#add-debug-mode","title":"Add Debug Mode","text":"<pre><code>parser.add_argument('--debug', action='store_true')\nargs = parser.parse_args()\n\nif args.debug:\n    logging.basicConfig(level=logging.DEBUG)\n</code></pre> <p>Configure in <code>config.yaml</code>:</p> <pre><code>args:\n  - \"--debug\"\n</code></pre>"},{"location":"guides/adding-tasks/#examples","title":"Examples","text":"<p>See existing tasks for reference:</p> <ul> <li>calendar-sync - Python task with macOS APIs</li> <li>Add your own examples here</li> </ul>"},{"location":"guides/adding-tasks/#next-steps","title":"Next Steps","text":"<ul> <li>Configuration Reference - Configure your task</li> <li>Troubleshooting - Debug task issues</li> <li>Architecture - Understand the system</li> </ul>"},{"location":"installation/","title":"Installation Guide","text":"<p>Simple Task Manager works on both macOS and Linux with platform-specific service managers.</p>"},{"location":"installation/#choose-your-platform","title":"Choose Your Platform","text":"<ul> <li>macOS Installation - Using launchd</li> <li>Linux Installation - Using systemd</li> </ul>"},{"location":"installation/#general-requirements","title":"General Requirements","text":"<ul> <li>Python: 3.7 or higher</li> <li>Git: For cloning the repository</li> <li>Make: Build automation (usually pre-installed)</li> </ul>"},{"location":"installation/#installation-overview","title":"Installation Overview","text":"<p>The installation process is the same on both platforms:</p> <ol> <li>Clone the repository</li> <li>Run <code>make install</code> to install dependencies</li> <li>Configure tasks in <code>config.yaml</code></li> <li>Run <code>make install-service</code> to create system service</li> <li>Run <code>make service-start</code> to start the scheduler</li> </ol> <p>The Makefile automatically detects your operating system and uses the appropriate service manager (launchd for macOS, systemd for Linux).</p>"},{"location":"installation/#verification","title":"Verification","text":"<p>After installation, verify everything is working:</p> <pre><code># Check scheduler status\nmake service-status\n\n# View logs\nmake service-logs\n\n# Test locally (optional)\nmake test-scheduler\n</code></pre>"},{"location":"installation/#upgrading","title":"Upgrading","text":"<p>To upgrade to a new version:</p> <pre><code># Pull latest changes\ngit pull\n\n# Stop the service\nmake service-stop\n\n# Reinstall dependencies\nmake clean-venv\nmake install\n\n# Restart the service\nmake service-start\n</code></pre>"},{"location":"installation/#uninstallation","title":"Uninstallation","text":"<p>To completely remove Simple Task Manager:</p> <pre><code># Stop and remove the service\nmake uninstall-service\n\n# Remove virtual environments\nmake clean-venv\nmake clean-all\n\n# Remove the repository\ncd ..\nrm -rf simple-task-manager\n</code></pre> <p>Logs will remain at: - macOS: <code>~/Library/Logs/scheduler.log</code> - Linux: <code>~/.local/share/scheduler/logs/scheduler.log</code></p>"},{"location":"installation/#next-steps","title":"Next Steps","text":"<ul> <li>Configuration Reference</li> <li>Adding Tasks</li> <li>Troubleshooting</li> </ul>"},{"location":"installation/linux/","title":"Linux Installation","text":"<p>Install Simple Task Manager on Linux using systemd for service management.</p>"},{"location":"installation/linux/#requirements","title":"Requirements","text":"<ul> <li>Linux: systemd-based distribution (Ubuntu, Debian, Fedora, Arch, etc.)</li> <li>Python: 3.7 or higher</li> <li>Git: For cloning the repository</li> </ul>"},{"location":"installation/linux/#install-prerequisites","title":"Install Prerequisites","text":"<p>Ubuntu/Debian: <pre><code>sudo apt update\nsudo apt install python3 python3-venv git make\n</code></pre></p> <p>Fedora: <pre><code>sudo dnf install python3 git make\n</code></pre></p> <p>Arch: <pre><code>sudo pacman -S python git make\n</code></pre></p>"},{"location":"installation/linux/#installation-steps","title":"Installation Steps","text":""},{"location":"installation/linux/#1-clone-the-repository","title":"1. Clone the Repository","text":"<pre><code>git clone https://github.com/patarra/simple-task-manager.git\ncd simple-task-manager\n</code></pre>"},{"location":"installation/linux/#2-install-dependencies","title":"2. Install Dependencies","text":"<pre><code>make install\n</code></pre> <p>This will: - Create a Python virtual environment in <code>scheduler/.venv/</code> - Install APScheduler and PyYAML - Install dependencies for each task in <code>tasks/*/</code></p>"},{"location":"installation/linux/#3-configure-tasks","title":"3. Configure Tasks","text":"<p>Edit <code>config.yaml</code>:</p> <pre><code>scheduler:\n  log_file: ~/.local/share/scheduler/logs/scheduler.log\n  default_timeout: 300\n\ntasks:\n  - name: my-task\n    path: tasks/my-task\n    cron: \"*/30 * * * *\"\n    args: []\n    enabled: true\n</code></pre>"},{"location":"installation/linux/#4-install-systemd-service","title":"4. Install systemd Service","text":"<pre><code>make install-service\n</code></pre> <p>This creates: <code>~/.config/systemd/user/scheduler.service</code></p> <p>The service file configures systemd to: - Run the scheduler as a user service - Restart on failure - Log to <code>~/.local/share/scheduler/logs/scheduler.log</code></p>"},{"location":"installation/linux/#5-enable-and-start-the-service","title":"5. Enable and Start the Service","text":"<pre><code># Start the service\nmake service-start\n\n# Enable auto-start at boot (optional)\nsystemctl --user enable scheduler\n</code></pre>"},{"location":"installation/linux/#verification","title":"Verification","text":""},{"location":"installation/linux/#check-service-status","title":"Check Service Status","text":"<pre><code>make service-status\n</code></pre> <p>Output should show:</p> <pre><code>\u25cf scheduler.service - Task Scheduler\n     Loaded: loaded (/home/user/.config/systemd/user/scheduler.service; disabled)\n     Active: active (running)\n</code></pre>"},{"location":"installation/linux/#view-logs","title":"View Logs","text":"<pre><code>make service-logs\n</code></pre> <p>Or use journalctl:</p> <pre><code>journalctl --user -u scheduler -f\n</code></pre> <p>You should see:</p> <pre><code>[2025-12-15 10:00:00] INFO: Scheduler started, loaded 1 tasks\n[2025-12-15 10:00:00] INFO: Registered task 'my-task' with cron '*/30 * * * *'\n</code></pre>"},{"location":"installation/linux/#service-management","title":"Service Management","text":""},{"location":"installation/linux/#startstoprestart","title":"Start/Stop/Restart","text":"<pre><code>make service-start     # Start the scheduler\nmake service-stop      # Stop the scheduler\nmake service-restart   # Restart the scheduler\n</code></pre> <p>Or use systemctl directly:</p> <pre><code>systemctl --user start scheduler\nsystemctl --user stop scheduler\nsystemctl --user restart scheduler\nsystemctl --user status scheduler\n</code></pre>"},{"location":"installation/linux/#enable-auto-start-at-boot","title":"Enable Auto-Start at Boot","text":"<pre><code># Enable the service\nsystemctl --user enable scheduler\n\n# Check if enabled\nsystemctl --user is-enabled scheduler\n</code></pre>"},{"location":"installation/linux/#disable-auto-start","title":"Disable Auto-Start","text":"<pre><code>systemctl --user disable scheduler\n</code></pre>"},{"location":"installation/linux/#logs","title":"Logs","text":""},{"location":"installation/linux/#view-live-logs","title":"View Live Logs","text":"<pre><code># Using make\nmake service-logs\n\n# Or using journalctl\njournalctl --user -u scheduler -f\n</code></pre>"},{"location":"installation/linux/#view-last-n-lines","title":"View Last N Lines","text":"<pre><code>journalctl --user -u scheduler -n 50\n</code></pre>"},{"location":"installation/linux/#view-logs-since-time","title":"View Logs Since Time","text":"<pre><code>journalctl --user -u scheduler --since \"1 hour ago\"\njournalctl --user -u scheduler --since \"2025-12-15 10:00:00\"\n</code></pre>"},{"location":"installation/linux/#export-logs","title":"Export Logs","text":"<pre><code>journalctl --user -u scheduler --since today &gt; scheduler-logs.txt\n</code></pre>"},{"location":"installation/linux/#lingering-run-without-login","title":"Lingering (Run Without Login)","text":"<p>By default, user services stop when you log out. To keep the scheduler running:</p> <pre><code># Enable lingering for your user\nloginctl enable-linger $USER\n\n# Verify\nloginctl show-user $USER | grep Linger\n</code></pre> <p>Now the scheduler will: - Start at system boot - Keep running even when you're not logged in - Stop only at system shutdown</p>"},{"location":"installation/linux/#troubleshooting","title":"Troubleshooting","text":""},{"location":"installation/linux/#service-wont-start","title":"Service Won't Start","text":"<pre><code># Check for syntax errors\nsystemd-analyze --user verify scheduler.service\n\n# View detailed logs\njournalctl --user -u scheduler -xe\n</code></pre>"},{"location":"installation/linux/#permission-denied","title":"Permission Denied","text":"<pre><code># Make sure run.sh files are executable\nchmod +x tasks/*/run.sh\n\n# Check service file permissions\nls -la ~/.config/systemd/user/scheduler.service\n</code></pre>"},{"location":"installation/linux/#service-stops-after-logout","title":"Service Stops After Logout","text":"<p>Enable lingering:</p> <pre><code>loginctl enable-linger $USER\n</code></pre>"},{"location":"installation/linux/#task-specific-issues","title":"Task-Specific Issues","text":"<p>Some tasks may be OS-specific. Check if the task supports Linux:</p> <pre><code>cd tasks/calendar-sync\nmake install\n</code></pre> <p>Tasks that require macOS-specific frameworks (like EventKit) will show a warning and skip installation.</p>"},{"location":"installation/linux/#uninstallation","title":"Uninstallation","text":"<pre><code># Disable and stop the service\nsystemctl --user disable scheduler\nmake uninstall-service\n\n# Remove dependencies\nmake clean-venv\nmake clean-all\n\n# Disable lingering (if enabled)\nloginctl disable-linger $USER\n\n# Remove the repository\ncd ..\nrm -rf simple-task-manager\n</code></pre> <p>Logs remain in <code>~/.local/share/scheduler/logs/</code> for reference.</p>"},{"location":"installation/linux/#advanced-configuration","title":"Advanced Configuration","text":""},{"location":"installation/linux/#custom-log-location","title":"Custom Log Location","text":"<p>Edit <code>~/.config/systemd/user/scheduler.service</code>:</p> <pre><code>[Service]\nStandardOutput=append:/custom/path/scheduler.log\nStandardError=append:/custom/path/scheduler.error.log\n</code></pre> <p>Then reload and restart:</p> <pre><code>systemctl --user daemon-reload\nmake service-restart\n</code></pre>"},{"location":"installation/linux/#environment-variables","title":"Environment Variables","text":"<p>Add environment variables to the service file:</p> <pre><code>[Service]\nEnvironment=\"MY_VAR=value\"\nEnvironment=\"ANOTHER_VAR=another_value\"\n</code></pre> <p>Reload and restart:</p> <pre><code>systemctl --user daemon-reload\nmake service-restart\n</code></pre>"},{"location":"installation/linux/#resource-limits","title":"Resource Limits","text":"<p>Limit CPU or memory usage:</p> <pre><code>[Service]\nCPUQuota=50%\nMemoryMax=512M\n</code></pre>"},{"location":"installation/linux/#nice-level-priority","title":"Nice Level (Priority)","text":"<p>Adjust process priority:</p> <pre><code>[Service]\nNice=10  # Lower priority (higher nice value)\n</code></pre>"},{"location":"installation/linux/#integration-with-system-services","title":"Integration with System Services","text":"<p>If you need root-level access, you can install as a system service instead:</p> <pre><code># Copy service file to system location\nsudo cp ~/.config/systemd/user/scheduler.service /etc/systemd/system/\n\n# Edit paths to use absolute paths\nsudo nano /etc/systemd/system/scheduler.service\n\n# Enable and start\nsudo systemctl enable scheduler\nsudo systemctl start scheduler\n</code></pre> <p>Note: This is usually not necessary for personal task automation.</p>"},{"location":"installation/linux/#next-steps","title":"Next Steps","text":"<ul> <li>Configuration Reference</li> <li>Adding Tasks</li> <li>Troubleshooting</li> </ul>"},{"location":"installation/macos/","title":"macOS Installation","text":"<p>Install Simple Task Manager on macOS using launchd for service management.</p>"},{"location":"installation/macos/#requirements","title":"Requirements","text":"<ul> <li>macOS: 10.14 (Mojave) or later</li> <li>Python: 3.7+ (usually pre-installed)</li> <li>Xcode Command Line Tools: For build tools</li> </ul> <pre><code>xcode-select --install\n</code></pre>"},{"location":"installation/macos/#installation-steps","title":"Installation Steps","text":""},{"location":"installation/macos/#1-clone-the-repository","title":"1. Clone the Repository","text":"<pre><code>git clone https://github.com/patarra/simple-task-manager.git\ncd simple-task-manager\n</code></pre>"},{"location":"installation/macos/#2-install-dependencies","title":"2. Install Dependencies","text":"<pre><code>make install\n</code></pre> <p>This will: - Create a Python virtual environment in <code>scheduler/.venv/</code> - Install APScheduler and PyYAML - Install dependencies for each task in <code>tasks/*/</code></p>"},{"location":"installation/macos/#3-configure-tasks","title":"3. Configure Tasks","text":"<p>Edit <code>config.yaml</code>:</p> <pre><code>scheduler:\n  log_file: ~/Library/Logs/scheduler.log\n  default_timeout: 300\n\ntasks:\n  - name: calendar-sync\n    path: tasks/calendar-sync\n    cron: \"*/30 * * * *\"\n    args: [\"--days\", \"30\"]\n    enabled: true\n</code></pre>"},{"location":"installation/macos/#4-install-launchd-service","title":"4. Install launchd Service","text":"<pre><code>make install-service\n</code></pre> <p>This creates: <code>~/Library/LaunchAgents/com.patarra.scheduler.plist</code></p> <p>The plist file configures launchd to: - Run the scheduler at login (<code>RunAtLoad</code>) - Keep the scheduler running (<code>KeepAlive</code>) - Log to <code>~/Library/Logs/scheduler.log</code></p>"},{"location":"installation/macos/#5-start-the-service","title":"5. Start the Service","text":"<pre><code>make service-start\n</code></pre> <p>The scheduler will now: - Start automatically at login - Restart if it crashes - Execute tasks according to their cron schedules</p>"},{"location":"installation/macos/#verification","title":"Verification","text":""},{"location":"installation/macos/#check-service-status","title":"Check Service Status","text":"<pre><code>make service-status\n</code></pre> <p>Output should show:</p> <pre><code>Scheduler Service Status:\n\n12345  0  com.patarra.scheduler\n\n\u2713 Service installed: /Users/you/Library/LaunchAgents/com.patarra.scheduler.plist\n</code></pre>"},{"location":"installation/macos/#view-logs","title":"View Logs","text":"<pre><code>make service-logs\n</code></pre> <p>You should see:</p> <pre><code>[2025-12-15 10:00:00] INFO: Scheduler started, loaded 1 tasks\n[2025-12-15 10:00:00] INFO: Registered task 'calendar-sync' with cron '*/30 * * * *'\n</code></pre>"},{"location":"installation/macos/#manual-log-access","title":"Manual Log Access","text":"<pre><code>tail -f ~/Library/Logs/scheduler.log\n</code></pre>"},{"location":"installation/macos/#service-management","title":"Service Management","text":""},{"location":"installation/macos/#startstoprestart","title":"Start/Stop/Restart","text":"<pre><code>make service-start     # Start the scheduler\nmake service-stop      # Stop the scheduler\nmake service-restart   # Restart the scheduler\n</code></pre>"},{"location":"installation/macos/#enabledisable-auto-start","title":"Enable/Disable Auto-Start","text":"<p>The service starts automatically at login by default.</p> <p>To disable auto-start:</p> <pre><code># Stop the service\nmake service-stop\n\n# Edit the plist\nnano ~/Library/LaunchAgents/com.patarra.scheduler.plist\n\n# Change RunAtLoad to false:\n# &lt;key&gt;RunAtLoad&lt;/key&gt;\n# &lt;false/&gt;\n</code></pre>"},{"location":"installation/macos/#manual-start-for-testing","title":"Manual Start (for testing)","text":"<pre><code># Stop the service first\nmake service-stop\n\n# Run scheduler manually\nmake test-scheduler\n</code></pre> <p>Press <code>Ctrl+C</code> to stop.</p>"},{"location":"installation/macos/#permissions","title":"Permissions","text":""},{"location":"installation/macos/#calendar-access-for-calendar-sync-task","title":"Calendar Access (for calendar-sync task)","text":"<p>On first run of the calendar-sync task, macOS will prompt:</p> <pre><code>\"Terminal\" would like to access your calendar.\n</code></pre> <p>Click OK to grant access.</p> <p>If you accidentally denied it:</p> <ol> <li>Open System Preferences \u2192 Security &amp; Privacy</li> <li>Select Privacy tab</li> <li>Select Calendars from the left sidebar</li> <li>Check the box next to Terminal (or Python)</li> </ol>"},{"location":"installation/macos/#full-disk-access-if-needed","title":"Full Disk Access (if needed)","text":"<p>Some tasks may require Full Disk Access:</p> <ol> <li>System Preferences \u2192 Security &amp; Privacy</li> <li>Privacy tab \u2192 Full Disk Access</li> <li>Add Python or Terminal if needed</li> </ol>"},{"location":"installation/macos/#troubleshooting","title":"Troubleshooting","text":""},{"location":"installation/macos/#service-wont-start","title":"Service Won't Start","text":"<pre><code># Check for errors in the plist\nplutil -lint ~/Library/LaunchAgents/com.patarra.scheduler.plist\n\n# Check system logs\nlog show --predicate 'process == \"launchd\"' --last 5m\n</code></pre>"},{"location":"installation/macos/#permission-denied","title":"Permission Denied","text":"<pre><code># Make sure run.sh files are executable\nchmod +x tasks/*/run.sh\n\n# Check launchd permissions\nls -la ~/Library/LaunchAgents/com.patarra.scheduler.plist\n</code></pre>"},{"location":"installation/macos/#task-fails-on-macos","title":"Task Fails on macOS","text":"<p>Check if the task is macOS-compatible. Some tasks are OS-specific:</p> <pre><code># Check task Makefile for OS detection\ncd tasks/calendar-sync\nmake install\n</code></pre> <p>OS-specific tasks will show a warning on unsupported platforms.</p>"},{"location":"installation/macos/#uninstallation","title":"Uninstallation","text":"<pre><code># Stop and remove the service\nmake uninstall-service\n\n# Remove dependencies\nmake clean-venv\nmake clean-all\n\n# Remove the repository\ncd ..\nrm -rf simple-task-manager\n</code></pre> <p>Logs remain in <code>~/Library/Logs/scheduler.log</code> for reference.</p>"},{"location":"installation/macos/#advanced-configuration","title":"Advanced Configuration","text":""},{"location":"installation/macos/#custom-log-location","title":"Custom Log Location","text":"<p>Edit <code>~/Library/LaunchAgents/com.patarra.scheduler.plist</code>:</p> <pre><code>&lt;key&gt;StandardOutPath&lt;/key&gt;\n&lt;string&gt;/custom/path/scheduler.log&lt;/string&gt;\n</code></pre> <p>Then restart:</p> <pre><code>make service-restart\n</code></pre>"},{"location":"installation/macos/#environment-variables","title":"Environment Variables","text":"<p>Add environment variables to the plist:</p> <pre><code>&lt;key&gt;EnvironmentVariables&lt;/key&gt;\n&lt;dict&gt;\n    &lt;key&gt;MY_VAR&lt;/key&gt;\n    &lt;string&gt;value&lt;/string&gt;\n&lt;/dict&gt;\n</code></pre>"},{"location":"installation/macos/#next-steps","title":"Next Steps","text":"<ul> <li>Configuration Reference</li> <li>Adding Tasks</li> <li>Troubleshooting</li> </ul>"},{"location":"tasks/","title":"Available Tasks","text":"<p>Browse tasks available in Simple Task Manager.</p>"},{"location":"tasks/#task-categories","title":"Task Categories","text":""},{"location":"tasks/#productivity","title":"\ud83d\udcc5 Productivity","text":"<ul> <li>calendar-sync - Synchronize events between calendars with filtering</li> </ul>"},{"location":"tasks/#system-maintenance","title":"\ud83d\udd27 System Maintenance","text":"<p>Add your maintenance tasks here</p>"},{"location":"tasks/#data-processing","title":"\ud83d\udcca Data Processing","text":"<p>Add your data processing tasks here</p>"},{"location":"tasks/#integration","title":"\ud83d\udd04 Integration","text":"<p>Add your integration tasks here</p>"},{"location":"tasks/#task-index","title":"Task Index","text":"Name Description Platform Language calendar-sync Calendar synchronization macOS only Python"},{"location":"tasks/#contributing-tasks","title":"Contributing Tasks","text":"<p>Have a useful task? Consider sharing it:</p> <ol> <li>Create a pull request with your task</li> <li>Include documentation in <code>tasks/your-task/README.md</code></li> <li>Add entry to this index</li> </ol> <p>See Adding Tasks for guidelines.</p>"},{"location":"tasks/#task-template","title":"Task Template","text":"<p>Need to create a new task? Start with our templates:</p> <ul> <li>Python Task Template</li> <li>Go Task Template</li> <li>Bash Task Template</li> </ul>"},{"location":"tasks/calendar-sync/","title":"Calendar Sync","text":"<p>Fast macOS calendar synchronization tool using EventKit for native calendar access.</p> <p>macOS Only</p> <p>This task requires macOS 10.14+ and the EventKit framework. It will not work on Linux.</p>"},{"location":"tasks/calendar-sync/#features","title":"Features","text":"<ul> <li>Fast Event Querying: Uses EventKit's native predicates for efficient database-level filtering</li> <li>Idempotent Synchronization: Safely sync events between calendars with automatic create/update/delete</li> <li>Flexible Filtering:</li> <li>Exclude declined events</li> <li>Exclude all-day events</li> <li>Exclude events by title patterns (case-insensitive)</li> <li>Configurable Date Range: Query events for any number of days from today</li> <li>Force Sync: Force a refresh of calendar sources before fetching</li> </ul>"},{"location":"tasks/calendar-sync/#requirements","title":"Requirements","text":"<ul> <li>macOS 10.14 (Mojave) or later</li> <li>Python 3.7+</li> <li>PyObjC (automatically installed)</li> <li>Calendar access permission (prompted on first run)</li> </ul>"},{"location":"tasks/calendar-sync/#configuration","title":"Configuration","text":"<p>Add to <code>config.yaml</code>:</p> <pre><code>tasks:\n  - name: calendar-sync\n    path: tasks/calendar-sync\n    cron: \"*/30 * * * *\" # Every 30 minutes\n    args:\n      - \"--source-calendar\"\n      - \"work@company.com\"\n      - \"--days\"\n      - \"30\"\n      - \"--exclude-declined-events\"\n      - \"--exclude-all-day-events\"\n      - \"--exclude-title\"\n      - \"Focus Time,1:1\"\n      - \"--do-sync\"\n      - \"Personal\"\n    timeout: 600\n    enabled: true\n</code></pre>"},{"location":"tasks/calendar-sync/#arguments","title":"Arguments","text":""},{"location":"tasks/calendar-sync/#-source-calendar-name","title":"<code>--source-calendar NAME</code>","text":"<p>Source calendar name to read events from.</p> <p>Default: <code>Personal</code></p>"},{"location":"tasks/calendar-sync/#-days-n","title":"<code>--days N</code>","text":"<p>Number of days from today to sync.</p> <p>Default: <code>7</code> Example: <code>--days 30</code> syncs next 30 days</p>"},{"location":"tasks/calendar-sync/#-exclude-declined-events","title":"<code>--exclude-declined-events</code>","text":"<p>Exclude events where you've declined the invitation.</p> <p>Flag: No value needed</p>"},{"location":"tasks/calendar-sync/#-exclude-all-day-events","title":"<code>--exclude-all-day-events</code>","text":"<p>Exclude all-day events from synchronization.</p> <p>Flag: No value needed</p>"},{"location":"tasks/calendar-sync/#-exclude-title-patterns","title":"<code>--exclude-title PATTERNS</code>","text":"<p>Comma-separated list of title patterns to exclude (case-insensitive).</p> <p>Example: <code>--exclude-title \"Focus Time,1:1,All Hands\"</code></p>"},{"location":"tasks/calendar-sync/#-force-sync","title":"<code>--force-sync</code>","text":"<p>Force a refresh of calendar sources before fetching events.</p> <p>Flag: No value needed</p>"},{"location":"tasks/calendar-sync/#-do-sync-calendar","title":"<code>--do-sync CALENDAR</code>","text":"<p>Destination calendar name. If specified, performs synchronization.</p> <p>Example: <code>--do-sync \"Personal\"</code></p> <p>Without this flag, the task only lists events without syncing.</p>"},{"location":"tasks/calendar-sync/#how-synchronization-works","title":"How Synchronization Works","text":"<p>The sync operation is idempotent (safe to run multiple times):</p> <ol> <li>Create: Events in source that don't exist in destination are created</li> <li>Update: Events that changed (title, time, location) are updated</li> <li>Delete: Events in destination that no longer exist in source are removed</li> </ol> <p>Events are tracked using a unique ID (MD5 hash of title + start + end time) stored in the notes field.</p>"},{"location":"tasks/calendar-sync/#availability-status","title":"Availability Status","text":"<p>When syncing events:</p> <ul> <li>Declined events: Marked as \"Free\" in destination</li> <li>All other events: Marked as \"Busy\" in destination</li> </ul>"},{"location":"tasks/calendar-sync/#examples","title":"Examples","text":""},{"location":"tasks/calendar-sync/#basic-query","title":"Basic Query","text":"<p>List events from default calendar for next 7 days:</p> <pre><code>cd tasks/calendar-sync\n./run.sh --days 7\n</code></pre>"},{"location":"tasks/calendar-sync/#sync-with-filtering","title":"Sync with Filtering","text":"<p>Sync next 30 days, excluding declined and all-day events:</p> <pre><code>args:\n  - \"--source-calendar\"\n  - \"work@company.com\"\n  - \"--days\"\n  - \"30\"\n  - \"--exclude-declined-events\"\n  - \"--exclude-all-day-events\"\n  - \"--do-sync\"\n  - \"Personal\"\n</code></pre>"},{"location":"tasks/calendar-sync/#exclude-specific-events","title":"Exclude Specific Events","text":"<p>Filter out \"Focus Time\" and \"1:1\" meetings:</p> <pre><code>args:\n  - \"--exclude-title\"\n  - \"Focus Time,1:1\"\n  - \"--do-sync\"\n  - \"Personal\"\n</code></pre>"},{"location":"tasks/calendar-sync/#manual-testing","title":"Manual Testing","text":"<pre><code>cd tasks/calendar-sync\n./run.sh \\\n  --source-calendar \"work@company.com\" \\\n  --days 14 \\\n  --exclude-declined-events \\\n  --do-sync \"Personal\"\n</code></pre>"},{"location":"tasks/calendar-sync/#calendar-types","title":"Calendar Types","text":"<ul> <li>Local Calendars (Mac only): Events appear instantly after sync</li> <li>Remote Calendars (iCloud, Exchange, CalDAV): May take 1-2 minutes to sync across devices</li> </ul> <p>For best results syncing to other devices, create a local calendar and enable iCloud sync in Calendar.app preferences.</p>"},{"location":"tasks/calendar-sync/#permissions","title":"Permissions","text":"<p>On first run, macOS will prompt:</p> <pre><code>\"Terminal\" would like to access your calendar.\n</code></pre> <p>Click OK to grant access.</p>"},{"location":"tasks/calendar-sync/#if-access-was-denied","title":"If Access Was Denied","text":"<ol> <li>Open System Preferences \u2192 Security &amp; Privacy</li> <li>Select Privacy tab</li> <li>Select Calendars from left sidebar</li> <li>Check box next to Terminal or Python</li> </ol>"},{"location":"tasks/calendar-sync/#troubleshooting","title":"Troubleshooting","text":""},{"location":"tasks/calendar-sync/#calendar-not-found","title":"Calendar Not Found","text":"<p>If you see \"Calendar 'X' not found\", the script lists all available calendars.</p> <p>Make sure you're using the exact name as it appears in Calendar.app.</p>"},{"location":"tasks/calendar-sync/#events-not-appearing","title":"Events Not Appearing","text":"<p>Remote calendars: Wait 1-2 minutes for sync Local calendars: Events appear instantly</p> <p>Check Calendar.app to verify events were created.</p>"},{"location":"tasks/calendar-sync/#permission-denied","title":"Permission Denied","text":"<p>Grant calendar access in System Preferences \u2192 Security &amp; Privacy \u2192 Privacy \u2192 Calendars.</p>"},{"location":"tasks/calendar-sync/#sync-conflicts","title":"Sync Conflicts","text":"<p>The sync is idempotent and uses unique IDs. Conflicts are resolved by:</p> <ul> <li>Most recent data wins for updates</li> <li>Source of truth is the source calendar</li> </ul>"},{"location":"tasks/calendar-sync/#implementation-details","title":"Implementation Details","text":"<p>Built using:</p> <ul> <li>EventKit: Apple's native calendar framework</li> <li>Foundation: Core macOS date/time handling</li> <li>PyObjC: Python bridge to Objective-C frameworks</li> </ul>"},{"location":"tasks/calendar-sync/#key-functions","title":"Key Functions","text":"<ul> <li><code>get_todays_events()</code>: Query events with filters</li> <li><code>sync_events()</code>: Idempotent synchronization</li> <li><code>is_event_declined_by_user()</code>: Check participation status</li> <li><code>get_event_unique_id()</code>: Generate tracking hash</li> </ul>"},{"location":"tasks/calendar-sync/#advanced-usage","title":"Advanced Usage","text":""},{"location":"tasks/calendar-sync/#dry-run-list-only","title":"Dry Run (List Only)","text":"<p>Omit <code>--do-sync</code> to see what would be synced:</p> <pre><code>./run.sh --source-calendar \"work@company.com\" --days 30\n</code></pre>"},{"location":"tasks/calendar-sync/#multiple-sync-jobs","title":"Multiple Sync Jobs","text":"<p>Run different sync configs for different calendars:</p> <pre><code>tasks:\n  - name: work-to-personal\n    path: tasks/calendar-sync\n    cron: \"*/30 * * * *\"\n    args: [\"--source-calendar\", \"work@company.com\", \"--do-sync\", \"Personal\"]\n    enabled: true\n\n  - name: personal-to-shared\n    path: tasks/calendar-sync\n    cron: \"0 * * * *\"\n    args: [\"--source-calendar\", \"Personal\", \"--do-sync\", \"Family\"]\n    enabled: true\n</code></pre>"},{"location":"tasks/calendar-sync/#source-code","title":"Source Code","text":"<p>See <code>tasks/calendar-sync/</code> for implementation:</p> <ul> <li><code>sync-calendar.py</code> - Main sync script</li> <li><code>run.sh</code> - Entry point</li> </ul>"},{"location":"tasks/calendar-sync/#related","title":"Related","text":"<ul> <li>Adding Tasks - Create your own tasks</li> <li>Configuration Reference - Task configuration</li> <li>Troubleshooting - Common issues</li> </ul>"}]}